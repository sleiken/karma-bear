<h1>Charities</h1>

<div class="col-md-8">
	<div id="map" style="height: 700px"></div>
</div>

<div class="col-md-2">
	<ul>
	<% @results.each do |result| %>
		<li><%= link_to result.name, charity_path(result) %></li>
	<% end %>
	</ul>
</div>


<script>
      function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 15,
					disableDefaultUI: true,
          center: {lat: 37.7846334, lng: -122.3996024}
        });
        // Create an array of alphabetical characters used to label the markers.
        var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        // Add some markers to the map.
        // Note: The code uses the JavaScript Array.prototype.map() method to
        // create an array of markers based on a given "locations" array.
        // The map() method here has nothing to do with the Google Maps API.
        var markers = locations.map(function(location, i) {
          return new google.maps.Marker({
            position: location,
            label: labels[i % labels.length]
          });
        });
        // Add a marker clusterer to manage the markers.
        var markerCluster = new MarkerClusterer(map, markers,
            {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});
      }

      var locations = []

      <%@results.each do |result|%>
      	locations.push({lat: <%=result.lat%>, lng: <%=result.lng%>})
      <%end%>


    </script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js">
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC9UVAh5qbkBDuvYU8EMSwWR6L9uM9Nurg&callback=initMap">
    </script>


<!--add link to redirect to specific charity  -->
