<%= render partial: 'manager/modals/drawer' %>

<div class="container-fluid">

  <!-- dashboards sections -->
  <div class="row">
    <!-- left side (small screen devices) -->
    <!-- right side (medium+ screen devices) -->
    <div class="col-md-9 col-md-push-3 text-center">
      <!-- Interactive Charts -->
      <div class="row">
        <div class="col-xs-12">
          <h2>Interactive Charts</h2>
          <div class="panel panel-default chart-section">
            <div class="panel-body">

            <div id="chart-container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Planned Events -->
      <div class="row">
        <div class="col-sm-6">
          <h2>Events</h2>
          <div class="panel panel-default scroll-section">
            <div class="panel-body">
              <%= render partial: 'manager/partials/events' %>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <h2>Needs</h2>
          <div class="panel panel-default scroll-section">
            <div class="panel-body">
              <%= render partial: 'manager/partials/needs' %>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-6">
          <h2>Registration Management</h2>
          <div class="panel panel-default scroll-section">
            <div class="panel-body">
              <%= render partial: 'manager/partials/registrations' %>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <h2>Donation Management</h2>
          <div class="panel panel-default scroll-section">
            <div class="panel-body">
              <%= render partial: 'manager/partials/donations' %>
             </div>
          </div>
        </div>
      </div>

    </div>

    <!-- right side -->
    <div class="col-md-3 col-md-pull-9">
      <!-- live activity feed -->
      <div class="row">
        <div class="col-xs-12 text-center">
          <h2>Activity Feed</h2>
          <div class="panel panel-default">
            <div class="panel-body notifications">
              <div class="list-group">
              <% @notifications.each do |notification| %>
                <%= render_notification(notification) %>
              <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<script>
$(function () {
var registrations_data = <%= @charity.registrations_per_month %>
registrations_data.push(null);
//

    if (!Highcharts.theme) {
        Highcharts.setOptions({
            chart: {
                backgroundColor: 'white'
            },
            colors: ['#904CFF', '#F44A3A', '#2DC7FC'],
            title: {
                style: {
                    color: '#904CFF'
                }
            },
            tooltip: {
                style: {
                    color: '#767676', // text color in hover over details box ** change this from purple
                    backgroundColor: "#000"
                },
                crosshairs: true,
                shared: true
            },
        });
    }


//
    Highcharts.chart('chart-container', {
        chart: {
            type: 'areaspline'
        },
        title: {
            text: "<%= @charity.name %>" + " Activity Report"
        },
        subtitle: {
            text: '2016'
        },
        xAxis: {
            categories: [
                'JAN',
                'FEB',
                'MAR',
                'APRIL',
                'MAY',
                'JUN',
                'JUL',
                'AUG',
                'SEP',
                'OCT',
                'NOV',
                'DEC'
                ]
        },
        yAxis: {
            title: {
                text: 'Number of KarmaBears'
            }
        },
        tooltip: {
            shared: true,
            valueSuffix: ' KarmaBears'
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            areaspline: {
                fillOpacity: 0.5,
                lineWidth: 3,
            }
        },
        series: [{
            name: 'Donations',
            data: <%= @charity.donations_per_month %>
        }, {
            name: 'Follows',
            data: <%= @charity.follows_per_month %>
        }, {
            name: 'Registrations',
            data: registrations_data
        }]
    });
});
</script>
